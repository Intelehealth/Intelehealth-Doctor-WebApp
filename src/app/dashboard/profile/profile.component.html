<div class="container-fluid">
  <div class="row">
    <div class="col-md-3 p-1">
      <div class="user-profile-con-2">
        <div class="profile-pic-con">
          <div class="profile-pic">
            <img [src]="profilePicUrl" (error)="onImgError($event)" alt="">
            <div class="file-input-con">
              <label for="profile-pic-2">
                <img src="assets/svgs/camera.svg" alt="">
              </label>
              <input id="profile-pic-2" type="file" accept="image/jpg" (change)="preview($event)">
            </div>
          </div>
          <h6>Dr. {{doctorName|titlecase}}</h6>
        </div>
      </div>
    </div>
    <div class="col-md-9 p-1">
      <div class="intel-card" *ngIf="!editMode">
        <div class="card-body">
          <div class="d-flex">
            <button class="ml-auto" type="button" mat-icon-button><img src="assets/svgs/edit.svg" alt="" width="20px" (click)="editMode=!editMode"></button>
          </div>
          <ul class="profile-items-list">
            <li>
              <div class="d-flex">
                <span class="label">
                  Gender
                </span>
                <span class="label-val">
                  {{(personalInfoForm.value.gender == 'M' ? 'Male': (personalInfoForm.value.gender == 'F') ? 'Female' : 'Other')|noValue:'NA'}}
                </span>
              </div>
            </li>
            <li>
              <div class="d-flex">
                <span class="label">
                  State
                </span>
                <span class="label-val">
                  {{personalInfoForm.value.visitState|noValue:'NA'}}
                </span>
              </div>
            </li>
            <li>
              <div class="d-flex">
                <span class="label">
                  Mobile No.
                </span>
                <span class="label-val">
                  {{personalInfoForm.value.phoneNumber|noValue:'NA'}}
                </span>
              </div>
            </li>
            <li>
              <div class="d-flex">
                <span class="label">
                  WhatsApp No.
                </span>
                <span class="label-val">
                  {{personalInfoForm.value.whatsapp|noValue:'NA'}}
                </span>
              </div>
            </li>
            <li>
              <div class="d-flex">
                <span class="label">
                  Email
                </span>
                <span class="label-val">
                  {{personalInfoForm.value.emailId|noValue:'NA'}}
                </span>
              </div>
            </li>
            <li>
              <div class="d-flex">
                <span class="label">
                  Qualification
                </span>
                <span class="label-val">
                  {{personalInfoForm.value.qualification|noValue:'NA'}}
                </span>
              </div>
            </li>
            <li>
              <div class="d-flex">
                <span class="label">
                  Specialization
                </span>
                <span class="label-val">
                  {{personalInfoForm.value.specialization|noValue:'NA'}}
                </span>
              </div>
            </li>
            <li>
              <div class="d-flex">
                <span class="label">
                  Registration No.
                </span>
                <span class="label-val">
                  {{personalInfoForm.value.registrationNumber|noValue:'NA'}}
                </span>
              </div>
            </li>
            <li class="signature-item">
              <div class="d-flex">
                <span class="label">
                  Signature
                </span>
                <span class="label-val" [style.fontFamily]="personalInfoForm.value.fontOfSign">
                  {{personalInfoForm.value.textOfSign}}
                </span>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class="intel-card" *ngIf="editMode">
        <div class="card-body">
          <form [formGroup]="personalInfoForm" (ngSubmit)="updateProfile()">
            <div class="form-row">
              <div class="form-group col-md-4">
                <label for="givenName">First name *</label>
                <input type="text" class="form-control" formControlName="givenName" placeholder="Enter first name">
                <div *ngIf="submitted && f1.givenName.errors">
                  <small class="error-msg" *ngIf="f1.givenName.errors.required">Enter first name</small>
                  <small class="error-msg" *ngIf="f1.givenName.errors.pattern">Enter alphabates only</small>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="middleName">Middle name *</label>
                <input type="text" class="form-control" formControlName="middleName" placeholder="Enter middle name">
                <div *ngIf="submitted && f1.middleName.errors">
                  <small class="error-msg" *ngIf="f1.middleName.errors.required">Enter middle name</small>
                  <small class="error-msg" *ngIf="f1.middleName.errors.pattern">Enter alphabates only</small>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="familyName">Last name *</label>
                <input type="text" class="form-control" formControlName="familyName" placeholder="Enter last name">
                <div *ngIf="submitted && f1.familyName.errors">
                  <small class="error-msg" *ngIf="f1.familyName.errors.required">Enter last name</small>
                  <small class="error-msg" *ngIf="f1.familyName.errors.pattern">Enter alphabates only</small>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="gender">Gender *</label>
                <div class="py-2">
                  <div class="pretty p-default p-round">
                    <input type="radio" value="M"  formControlName="gender">
                    <div class="state p-success">
                        <label>Male</label>
                    </div>
                    </div>
                    <div class="pretty p-default p-round">
                        <input type="radio" value="F"  formControlName="gender">
                        <div class="state p-success">
                            <label>Female</label>
                        </div>
                    </div>
                    <div class="pretty p-default p-round">
                        <input type="radio" value="U"  formControlName="gender">
                        <div class="state p-success">
                            <label>Other</label>
                        </div>
                    </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="birthdate">Date of birth *</label>
                <div class="input-group">
                  <input type="text" class="form-control" formControlName="birthdate" [matDatepicker]="dobdp" placeholder="Enter DOB" aria-label="Birthdate"
                    aria-describedby="basic-addon1" readonly>
                  <mat-datepicker #dobdp></mat-datepicker>
                  <div class="input-group-append">
                    <span class="input-group-text" id="basic-addon1">
                      <mat-datepicker-toggle matSuffix [for]="dobdp">
                        <img matDatepickerToggleIcon src="assets/svgs/calendar-date.svg" alt="">
                      </mat-datepicker-toggle>
                    </span>
                  </div>
                </div>
                <div *ngIf="submitted && f1.birthdate.errors">
                  <small class="error-msg" *ngIf="f1.birthdate.errors.required">Enter DOB</small>
                </div>
              </div>
              <div class="form-group col-md-2">
                <label for="age">Age *</label>
                <input type="number" class="form-control" formControlName="age" placeholder="Enter age">
                <div *ngIf="submitted && f1.age.errors">
                  <small class="error-msg" *ngIf="f1.age.errors.required">Enter age</small>
                  <small class="error-msg" *ngIf="f1.age.errors.pattern">Enter numeric value only</small>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="phoneNumber">Phone Number *</label>
                <input type="text"
                  ng2TelInput
                  [ng2TelInputOptions]="{initialCountry: 'in', separateDialCode: true, autoHideDialCode: false}"
                  (hasError)="hasError($event, 'phoneNumber')"
                  (ng2TelOutput)="getNumber($event, 'phoneNumber')"
                  (intlTelInputObject)="telInputObject($event, 'phoneNumber')"
                  (countryChange)="onCountryChange($event, 'phoneNumber')"
                  placeholder="Enter Mobile Number"
                  class="form-control"
                  formControlName="phoneNumber"
                  onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))"/>
                <div *ngIf="submitted && f1.phoneNumber.errors">
                  <small class="error-msg" *ngIf="f1.phoneNumber.errors.required">Enter phone number</small>
                </div>
                <div *ngIf="submitted && !f1?.phoneNumber?.errors && !phoneNumberValid">
                  <small class="error-msg">Enter valid phone number</small>
                </div>
              </div>
              <div class="form-group col-md-6">
                <label for="whatsapp">WhatsApp Number *</label>
                <input type="text"
                  ng2TelInput
                  [ng2TelInputOptions]="{initialCountry: 'in', separateDialCode: true, autoHideDialCode: false}"
                  (hasError)="hasError($event, 'whatsAppNumber')"
                  (ng2TelOutput)="getNumber($event, 'whatsAppNumber')"
                  (intlTelInputObject)="telInputObject($event, 'whatsAppNumber')"
                  (countryChange)="onCountryChange($event, 'whatsAppNumber')"
                  placeholder="Enter Mobile Number"
                  class="form-control"
                  formControlName="whatsapp"
                  onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))"/>
                <div *ngIf="submitted && f1.whatsapp.errors">
                  <small class="error-msg" *ngIf="f1.whatsapp.errors.required">Enter whatsApp number</small>
                </div>
                <div *ngIf="submitted && !f1.whatsapp?.errors && !whatsAppNumberValid">
                  <small class="error-msg">Enter valid whatsApp number</small>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="emailId">Email ID *</label>
                <input type="email" class="form-control" formControlName="emailId" placeholder="Enter email">
                <div *ngIf="submitted && f1.emailId.errors">
                  <small class="error-msg" *ngIf="f1.emailId.errors.required">Enter email</small>
                  <small class="error-msg" *ngIf="f1.emailId.errors.pattern">Enter valid email</small>
                </div>
              </div>
              <div class="form-group col-md-6">
                <label for="registrationNumber">State</label>
                <input type="text" class="form-control" formControlName="visitState" placeholder="Enter state">
                <div *ngIf="submitted && f1.visitState.errors">
                  <small class="error-msg" *ngIf="f1.visitState.errors.required">Enter state</small>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="typeOfProfession">Qualification *</label>
                <ng-select class="profile-select" [items]="professions" bindLabel="name" bindValue="name" [clearable]="false" [searchable]="false" formControlName="qualification" placeholder="Select qualification">
                </ng-select>
                <div *ngIf="submitted && f1.qualification.errors">
                  <small class="error-msg" *ngIf="f1.qualification.errors.required">Select qualification</small>
                </div>
              </div>
              <div class="form-group col-md-6">
                <label for="specialization">Specialization *</label>
                <ng-select class="profile-select" [items]="specializations" bindLabel="name" bindValue="name" [clearable]="false" [searchable]="false" formControlName="specialization" placeholder="Select specialization">
                </ng-select>
                <div *ngIf="submitted && f1.specialization.errors">
                  <small class="error-msg" *ngIf="f1.specialization.errors.required">Select specialization</small>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="registrationNumber">Registration Number *</label>
                <input type="text" class="form-control" formControlName="registrationNumber" placeholder="Enter registration number">
                <div *ngIf="submitted && f1.registrationNumber.errors">
                  <small class="error-msg" *ngIf="f1.registrationNumber.errors.required">Enter registration number</small>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="col-md-12">
                <h6>Edit signature</h6>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="textOfSign">Signature letters *</label>
                <input type="text" class="form-control" placeholder="Enter signature letters" formControlName="textOfSign">
                <div *ngIf="submitted && f1.textOfSign.errors">
                  <small class="error-msg" *ngIf="f1.textOfSign.errors.required">Enter signature letters</small>
                </div>
              </div>
              <div class="form-group col-md-6">
                <label for="fontOfSign">Select Signature *</label>
                <ng-select appendTo=".form-group" class="profile-select" [items]="fonts" bindLabel="name" bindValue="name" [clearable]="false" [searchable]="false" placeholder="Select Signature" formControlName="fontOfSign">
                  <ng-template ng-label-tmp let-item="item">
                    <p class="mb-0" [style.fontFamily]="item.name" style="font-size: 30px;">{{item.text}}</p>
                  </ng-template>
                  <ng-template ng-option-tmp let-item="item" let-index="index">
                    <p class="mb-0" [style.fontFamily]="item.name" style="font-size: 50px;">{{item.text}}</p>
                  </ng-template>
                </ng-select>
                <div *ngIf="submitted && f1.fontOfSign.errors">
                  <small class="error-msg" *ngIf="f1.fontOfSign.errors.required">Select Signature</small>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-12 text-right">
                <button type="submit" class="btn next-btn">
                  Save
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
