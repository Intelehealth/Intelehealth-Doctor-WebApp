<mat-expansion-panel [expanded]="true" data-test-id="matExpCompleted">
    <mat-expansion-panel-header data-test-id="matExpHeaderCompleted">
      <mat-panel-title>
        <div id="anchor-completed" class="anchor-con"></div>
        <div class="intel-accordion-title">
          <img src="assets/svgs/completed.svg" alt="" width="44px">
          <h6 class="mb-0 ml-2">
            {{ 'Completed Visits' | translate }} ({{ completedVisitsCount ? completedVisitsCount : 0 }})
          </h6>
          <mat-icon aria-hidden="false" class="info-icon" aria-label="help icon" matTooltip="{{ 'Visits going through the consultation' | translate }}" matTooltipPosition="right" data-test-id="matIcoHelpCompleted">help_outline</mat-icon>
          <div class="input-group search-bar ml-auto d-flex" (click)="$event.stopPropagation();">
            <input type="text" #ipSearchInput class="form-control" placeholder="{{ 'Search Completed Visits' | translate }}" aria-label="Username" aria-describedby="basic-addon1" (keyup)="applyFilter($event)" (keydown.Space)="$event.stopPropagation()" (keydown.Enter)="$event.stopPropagation()" data-test-id="etSearchCompletedDashboard">
            <div class="input-group-append">
              <span class="input-group-text" id="basic-addon1" *ngIf="!tblDataSource.filter">
                <img src="assets/svgs/search-icon.svg" alt="" width="20px" height="20px">
              </span>
              <button data-test-id="btnResetIpSerach" mat-icon-button aria-label="Reset completed search" *ngIf="tblDataSource.filter" (click)="clearFilter()">
                <mat-icon class="ml-0" style="line-height: normal;">close</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </mat-panel-title>
    </mat-expansion-panel-header>
  
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="tblDataSource">
  
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>{{ 'Patient' | translate }}</th>
          <td mat-cell *matCellDef="let element; let j = index;" [attr.data-test-id]="'ipPatient' + j">
            <div class="d-flex align-items-center">
              <img src="{{ baseUrl + '/personimage/' + element.person.uuid }}" alt="" width="32px" height="32px" style="border-radius: 50%;">
              <span class="font-bold ml-2">{{ element.patient_name.given_name }} {{ checkPatientRegField('Middle Name') && element.patient_name?.middle_name ? element.patient_name?.middle_name + ' ' : '' }}{{ element.patient_name.family_name }} ({{ (element.person.gender) | translate }})</span>
            </div>
          </td>
        </ng-container>
  
        <!-- Age Column -->
        <ng-container matColumnDef="age">
          <th mat-header-cell *matHeaderCellDef>{{ 'Age' | translate }}</th>
          <td mat-cell *matCellDef="let element; let j = index;" [attr.data-test-id]="'ipAge' + j">{{ element.person.age }} {{ 'y' | translate }}</td>
        </ng-container>
  
        <!-- Location Column -->
        <ng-container matColumnDef="location">
          <th mat-header-cell *matHeaderCellDef>{{ 'Location' | translate }}</th>
          <td mat-cell *matCellDef="let element; let j = index;" [attr.data-test-id]="'ipLocation' + j">{{ element.location.name }}</td>
        </ng-container>
  
        <!-- Chief complaint Column -->
        <ng-container matColumnDef="cheif_complaint">
          <th mat-header-cell *matHeaderCellDef>{{ 'Chief Complaint' | translate }}</th>
          <td mat-cell *matCellDef="let element; let j = index;" [attr.data-test-id]="'ipComplaint' + j">{{ element.cheif_complaint }}</td>
        </ng-container>
  
        <!-- Prescription Started Column -->
        <ng-container matColumnDef="visit_completed">
          <th mat-header-cell *matHeaderCellDef>{{ 'Visit Completed' | translate }}</th>
          <td mat-cell *matCellDef="let element; let j = index;" [attr.data-test-id]="'ipPresStart' + j">
            <div class="red-pill">
              <img src="assets/svgs/red-pad.svg" alt="">
              <span class="ml-2">{{ element.completed }}</span>
            </div>
          </td>
        </ng-container>
  
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell text-center" [attr.colspan]="displayedColumns.length">
            {{ 'No any completed visits.' | translate }}
          </td>
        </tr>
  
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; let x = index; columns: displayedColumns;" [attr.data-test-id]="'ip' + x" [routerLink]="['/dashboard/visit-summary', row.uuid]"></tr>
      </table>
  
      <mat-paginator #tempPaginator hidePageSize [pageSizeOptions]="[5, 10, 20]" aria-label="Select page of periodic elements"></mat-paginator>
    </div>
  
  </mat-expansion-panel>
  