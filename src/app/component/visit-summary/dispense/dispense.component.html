<div [ngClass]="getLang() === 'ar' ? 'class1' : 'class2'">
    <h4><i class='fa fa-hospital'></i> {{'Dispense'| translate}}</h4>
    <hr>
    <div>
        <ng-container *ngIf="dispenseMedAid.length > 0">
            <div class="modal-body row">
                <div class="col-md-12 p-0">
                    <mat-accordion>
                        <ng-container *ngFor="let meds of dispenseMedAid, index as i">
                            <mat-expansion-panel>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        <b>{{('Dispensed by'|translate)+' : '+meds.creator.person.display}} |
                                            {{meds.obsDatetime|date:'dd-MM-y , hh:mm a'}}</b>
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <div [@moveInLeft] class="alert" [ngClass]="{ 'alert-primary': !meds.comment, 'alert-danger': meds.comment }">
                                    <div class="doctor-value d-flex flex-column">
                                        <table class="table table-responsive borderless">
                                            <tr>
                                                <div *ngIf="meds.medicationUuidList">
                                                    <div><h5>{{'Medicines'|translate}}</h5></div>
                                                    <ul>
                                                        <li *ngFor="let uuid of meds.medicationUuidList">
                                                            <div *ngFor="let m of medicines">
                                                                <div *ngIf="uuid == m.uuid">
                                                                    <span *ngIf="meds.medicationUuidList" [innerHTML]="m.value.replace('\n','<br>').replace(':','')"></span>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div *ngIf="meds.aidUuidList">
                                                    <div><h5>{{'Aids'|translate}}</h5></div>
                                                    <ul>
                                                        <div *ngFor="let a of aids;  let x = index">
                                                            <div *ngFor="let uuid of meds.aidUuidList">
                                                                <div *ngIf="a.uuid == uuid">
                                                                    <div *ngIf="a.display.split('.')[0] === 'Type 1'">
                                                                        <li>
                                                                            {{'Type 1. Medical Equipment loan (nebulizer, oxygen container, cane, wheel chair, hospital bed, others)'|translate}} <br>
                                                                            <b>{{ a.value.split('||')[0] }} {{(a.value.split('||')[1])? ' (' + a.value.split('||')[1] + ')' : ''}}</b>
                                                                        </li>
                                                                    </div>
                                                                    <div *ngIf="a.display.split('.')[0] === 'Type 2'">
                                                                        <li>
                                                                            {{'Type 2. Free Medical equipment (Stents, baloons, others)'|translate}} <br>
                                                                            <b>{{ a.value.split('||')[0]}} {{(a.value.split('||')[1])? ' (' + a.value.split('||')[1] + ')' : ''}}</b>
                                                                        </li>
                                                                    </div>
                                                                    <div *ngIf="a.display.split('.')[0] === 'Type 3'">
                                                                        <li>
                                                                            {{'Type 3. Cover medication expenses (amount)'|translate}} <br>
                                                                            <b>{{ a.value }}</b>
                                                                        </li>
                                                                    </div>
                                                                    <div *ngIf="a.display.split('.')[0] === 'Type 4'">
                                                                        <li>
                                                                            {{'Type 4. Cover surgical expenses (amount)'|translate}} <br>
                                                                            <b>{{ a.value }}</b>
                                                                        </li>
                                                                    </div>
                                                                    <div *ngIf="a.display.split('.')[0] === 'Type 5'">
                                                                        <li>
                                                                            {{'Type 5. Cash assistance (amount)'|translate}} <br>
                                                                            <b>{{ a.value }}</b>
                                                                        </li>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <li>
                                                            <div *ngIf="meds.totalCost" class="list-item">
                                                                <label class="item"><b>{{'Total Cost'|translate}}</b></label>
                                                                <div class="list-item-content">{{meds.totalCost}}</div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div *ngIf="meds.vendorDiscount" class="list-item">
                                                                <label class="item"><b>{{'Vendor Discount'|translate}}</b></label>
                                                                <div class="list-item-content">{{meds.vendorDiscount}}</div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div *ngIf="meds.coveredCost" class="list-item">
                                                                <label class="item"><b>{{'Covered Cost'|translate}}</b></label>
                                                                <div class="list-item-content">{{meds.coveredCost}}</div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div *ngIf="meds.outOfPocket" class="list-item">
                                                                <label class="item"><b>{{'Out Of Pocket'|translate}}</b></label>
                                                                <div class="list-item-content">{{meds.outOfPocket}}</div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div *ngIf="meds.otherAids" class="list-item">
                                                                <label class="item"><b>{{'Other Aids'|translate}}</b></label>
                                                                <div class="list-item-content">{{meds.otherAids}}</div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div *ngIf="meds.medicationNotesList || meds.aidNotesList">
                                                    <div><h5>{{'Notes'|translate}}</h5></div>
                                                    <ul>
                                                        <li *ngFor="let mednote of meds.medicationNotesList">
                                                            <div *ngIf="meds.medicationNotesList" class="list-item">
                                                                <label class="item"><b>{{'Medicine Note'|translate}}</b></label>
                                                                <div class="list-item-content">{{mednote}}</div>
                                                            </div>
                                                        </li>
                                                        <li *ngFor="let aiddnote of meds.aidNotesList">
                                                            <div *ngIf="meds.aidNotesList" class="list-item">
                                                                <label class="item"><b>{{'Aid Note'|translate}}</b></label>
                                                                <div class="list-item-content">{{aiddnote}}</div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div *ngIf="meds.docImage">
                                                    <div><h5>{{'Documents'|translate}}</h5></div>
                                                    <ul>
                                                        <div class="list-item">
                                                            <div class="list-item-content">
                                                                <div class="eye-images-con">
                                                                    <div class="eye-item" *ngFor="let e of meds.docImage; index as x">
                                                                        <img [src]="e.src" alt="" />
                                                                        <div class="image-cover" (click)="previewEyeImages(x, meds.docImage)">
                                                                            <img src="assets/svgs/maximize.svg" alt=""/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ul>
                                                </div>
                                            </tr>
                                        </table>
                                        <div class="mt-2 d-flex flex-column border-top border-primary pt-2">
                                            <span class="comment-blue">{{('Dispensed by'|translate)+' : '+meds.creator.person.display}} | {{meds.obsDatetime|date:'dd-MM-y ,hh:mm a'}}</span>
                                        </div>
                                    </div>
                                </div>
                            </mat-expansion-panel>
                        </ng-container>
                    </mat-accordion>
                </div>
            </div>
        </ng-container>
    </div>
</div>