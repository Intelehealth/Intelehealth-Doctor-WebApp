<div>
      <h2 style="text-align:center;">{{ 'Visit Summary'| translate }}</h2>
</div>
<mat-spinner *ngIf="setSpiner" [diameter]="70"></mat-spinner>
<div class="container" [ngClass]="(setSpiner)?'spin':''">
      <mat-card>
            <app-patientinfo></app-patientinfo>
      </mat-card>
      <br>
      <mat-card *ngIf="userSpeciality == 'Admin'">
        <app-aid-assessment></app-aid-assessment>
      </mat-card>
      <br>
      <mat-card>
            <app-past-visits></app-past-visits>
      </mat-card>
      <br>
      <mat-card>
            <app-current-visit></app-current-visit>
      </mat-card>
      <br>
      <mat-card>
            <app-presenting-complaints></app-presenting-complaints>
      </mat-card>
      <br>
      <mat-card>
            <app-family-history></app-family-history>
      </mat-card>
      <br>
      <mat-card>
            <app-past-medical-history></app-past-medical-history>
      </mat-card>
      <br>
      <mat-card>
            <app-vital></app-vital>
      </mat-card>
      <br>
      <mat-card>
            <app-on-examination></app-on-examination>
      </mat-card>
      <br>
      <mat-card>
            <app-physical-examination></app-physical-examination>
      </mat-card>
      <br>
      <mat-card>
            <app-additional-documents></app-additional-documents>
      </mat-card>
      <br>
      <!-- <mat-card *ngIf="!visitNotePresent">
        <app-reassign-speciality [isManagerRole]="isManagerRole"></app-reassign-speciality>
      </mat-card> -->
      <br>
      <mat-card [ngClass]="getLang() === 'ar' ? 'class1' : 'class2'">
            <small style="color: red">
                  <i>
                        <b>{{ 'Note' | translate }}:</b>
                        {{ 'Verify the accuracy of the collected data by directly communicating with the patient and field staff'| translate }}
                        {{ 'through the communication windows provided below, as the history and clinical examination were conducted'| translate }}
                        {{ 'by a nurse or field health professional.'| translate }}
                  </i>
            </small>
      </mat-card>
      <br>


      <div class="text-center" *ngIf="!show">
            <button (click)="onStartVisit()" id="start-visit" mat-raised-button color="primary"
            [disabled]="isSameSpecialityDoctorViewingVisit || (visitSpeciality != userSpeciality && visitSpecialitySecondary != userSpeciality ) || isManagerRole">{{'Start Visit Note' | translate}}</button>
      </div>

      <br>

      <div *ngIf="show">
            <mat-card>
                  <app-patient-interaction [visitCompleted]="visitCompletePresent" [isManagerRole]="isManagerRole"></app-patient-interaction>
            </mat-card>
            <br>
            <mat-card>
                  <app-diagnosis [visitCompleted]="visitCompletePresent" [isManagerRole]="isManagerRole" [events]="eventsSubject.asObservable()"></app-diagnosis>
            </mat-card>
            <br>
            <mat-card>
                  <app-prescribed-medication [visitCompleted]="visitCompletePresent" [isManagerRole]="isManagerRole" [events]="eventsSubject.asObservable()"></app-prescribed-medication>
            </mat-card>
            <br>
            <div  *ngIf="isDispense">
                  <mat-card>
                        <app-dispense></app-dispense>
                  </mat-card>
                  <br>
            </div>
            <div  *ngIf="isAdminister">
                  <mat-card>
                        <app-administer></app-administer>
                  </mat-card>
                  <br>
            </div>
            <mat-card>
                  <app-prescribed-test [visitCompleted]="visitCompletePresent" [isManagerRole]="isManagerRole" [events]="eventsSubject.asObservable()"></app-prescribed-test>
            </mat-card>
            <br>
            <div  *ngIf="isCollectedBy">
                  <mat-card>
                        <app-collected-by></app-collected-by>
                  </mat-card>
                  <br>
            </div>
            <div  *ngIf="isReceiveBy">
                  <mat-card>
                        <app-resulted-by></app-resulted-by>
                  </mat-card>
                  <br>
            </div>
            <mat-card>
                  <app-advice [visitCompleted]="visitCompletePresent" [isManagerRole]="isManagerRole" [events]="eventsSubject.asObservable()"></app-advice>
            </mat-card>
            <br>
            <mat-card>
              <app-aid-order [visitCompleted]="visitCompletePresent" [isManagerRole]="isManagerRole"></app-aid-order>
            </mat-card>
            <br>
            <mat-card>
                  <app-additional-comment [visitCompleted]="visitCompletePresent" [isManagerRole]="isManagerRole" [events]="eventsSubject.asObservable()"></app-additional-comment>
            </mat-card>
            <br>
            <mat-card>
                  <app-follow-up [visitCompleted]="visitCompletePresent" [isManagerRole]="isManagerRole" [events]="eventsSubject.asObservable()"></app-follow-up>
            </mat-card>
            <br>
            <mat-card>
              <app-discharge-order [visitCompleted]="visitCompletePresent" [isManagerRole]="isManagerRole" [events]="eventsSubject.asObservable()"></app-discharge-order>
            </mat-card>
            <br>
            <mat-card *ngIf="(!(userSpeciality == 'Admin' && visitSpecialitySecondary == 'Admin')) && !visitCompletePresent">
              <app-reassign-speciality [isManagerRole]="isManagerRole" [providerSpeciality]="userSpeciality" [visitSpeciality]="visitSpeciality" [visitSpecialitySecondary]="visitSpecialitySecondary"></app-reassign-speciality>
            </mat-card>
            <br *ngIf="!visitCompletePresent">

            <ng-container *ngIf="visitCompletePresent">
                  <div class="d-flex justify-content-center">
                        <mat-card>
                              <div [style.font-family]="font" style="font-size: 50px">{{text}}</div>
                        </mat-card>
                  </div>
                  <br>
            </ng-container>

            <div class="d-flex justify-content-between flex-wrap">
              <button [disabled]="visitCompletePresent" class="btn-action m-1" (click)="saveData()" id="save-button" mat-raised-button color="primary">{{ 'Save' | translate }}</button>

                  <button (click)="sign()" id="sign-button" class="btn-action m-1" mat-raised-button color="primary"
                  [disabled]="!isVisitNoteEncProvider || visitCompletePresent || isManagerRole">{{ 'Complete Prescription' | translate }}</button>
            </div>
      </div>
</div>
<div class="chat-button" *ngIf="show" id="chat-button" (click)="openChatModal()">
      <span><i class="fa fa-comment" aria-hidden="true"></i> </span>
</div>
<div class="vc-button" *ngIf="show" (click)="openVcModal()">
      <span><img [src]="videoIcon" /></span>
</div>
