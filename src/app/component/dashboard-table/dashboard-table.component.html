<div class="main ml-3">
  <div class="d-flex">
    <img [src]="table?.lableIconPath" />
    <div class="appointment-label">
      {{ table?.label }} ({{ table?.dataCount }})
      <div [matTooltip]="table.info" matTooltipPosition="right" [matTooltipClass]="{'info-message-tooltip': true}">
        <img src="assets/svgs/info.svg" />
      </div>
    </div>

    <!-- <button class="btn btn-light btn-filter mt-2">
      <img src="assets/svgs/filter.svg" /> Filter
    </button> -->
    <div
      data-toggle="collapse"
      [attr.data-target]="'#' + table.id"
      class="arrow"
      (click)="toggleCollapse()"
    >
      <img class="" [src]="toggleImage"/>
    </div>
  </div>

  <div [id]="table.id" class="table">
    <hr/>
    <table class="table table-borderless w-100">
      <tr class="table-color-th">
        <th [class]="header?.headerClass" *ngFor="let header of table?.headers">
          {{ header?.name }}
        </th>
      </tr>
      <tr
        *ngFor="let data of pagedItems"
        [ngClass]="{ actives: data?.isActive }"
        class="table-height"
        [routerLink]="['/dashboard/visit-summary', data?.patientId, data?.visitId]"
      >
        <td
          *ngFor="let header of table?.headers"
          class="vr {{ header?.headerClass }}"
        >
          <ng-container [ngSwitch]="true">
            <div *ngSwitchCase="header?.type === 'stringwithimage'">
              <img src="{{ baseUrl + '/personimage/' + data.patient}}" (error) ="onImgError($event)" alt="" width="32px" height="32px" style="border-radius: 50%;">
              <span class="font-bold ml-2">{{ data.name }}</span>
            </div>

            <div *ngSwitchCase="header?.type === 'pill'">
              <div
                *ngFor="let btn of header?.buttons"
                class="{{ btn?.btnClass }}"
              >
                <img class="mr-1" [src]="data[header?.imageKey]" />
                {{ data?.visitCreated }}
              </div>
            </div>

            <div *ngSwitchCase="header?.type === 'multibutton'">
              <button
                *ngFor="let btn of header?.buttons"
                class="btn btn-light {{ btn?.btnClass }}"
                (click)="btn?.onClick()"
              >
                {{ btn?.label }}
              </button>
            </div>

            <div *ngSwitchCase="header?.type === 'array'">
              <div *ngFor="let i of data?.complaints">
                {{ i }}
              </div>
            </div>

            <div *ngSwitchCase="header?.type === 'number'">
                {{ data.age }}{{"y"}}
            </div>

            <div *ngSwitchDefault>{{ data[header?.key] }}</div>
          </ng-container>
        </td>
      </tr>
      
      <tr class="table_height" *ngIf="data.length === 0">
        <ng-container *ngIf="table?.label == 'Appointments'">
          <td [attr.colspan]="table?.headers.length">
            <div class="text">
              No any appointment scheduled
            </div>
          </td>
        </ng-container>
        <ng-container *ngIf="table?.label == 'Priority Visits'">
          <td [attr.colspan]="table?.headers.length">
            <div class="text">
              No any priority visits
            </div>
          </td>
        </ng-container>
        <ng-container *ngIf="table?.label == 'Awaiting visits'">
          <td [attr.colspan]="table?.headers.length">
            <div class="text">
              No any awaiting visits
            </div>
          </td>
        </ng-container>
        <ng-container *ngIf="table?.label == 'In-progress visits'">
          <td [attr.colspan]="table?.headers.length">
            <div class="text">
              No any in-progress visits
            </div>
          </td>
        </ng-container>
      </tr>
    </table>

    <!-- pager -->
    <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
      <li>{{1}} of {{allItems.length}} Patient</li>
      <li [ngClass]="{disabled:pager.currentPage === 1}" >
          <a (click)="setPage(pager.currentPage - 1)">
            <img src="assets/svgs/Vector_left.svg" style="cursor: pointer;">
          </a>
      </li>
      <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}" style="cursor: pointer;">
          <a (click)="setPage(page)">{{page}}</a>
      </li>
      <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
          <a (click)="setPage(pager.currentPage + 1)">
            <img src="assets/svgs/Vector_right.svg" style="cursor: pointer;">
          </a>
      </li>
    </ul>
  </div>

